<!DOCTYPE html>
<html>
<head>

	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>blog | hector</title>

	<link rel="stylesheet" type="text/css" href="../css/blog.css">
	<link rel="stylesheet" type="text/css" href="../css/font-awesome.css">
	<link rel="stylesheet" type="text/css" href="../css/icomoon.css">

</head>

<body id="blogpost">
	<header class="navbar navbar-inverse normal" role="banner">
		<div class="container">
			<div class="navbar-header">
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="https://akhilhector.com" class="navbar-brand">Akhil Pandey</a>
			</div>
			<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
				<ul class="nav navbar-nav">
					<li><a href="../../about/index.html">About</a></li>
					<li><a href="https://github.com/AkhilHector">Code</a></li>
					<li><a href="../index.html">Blog</a></li>
					<li><a href="https://akhilhector.com/photos">Photos</a></li>
				</ul>
			</nav>
		</div>
	</header>

	<div id="blogpost-wrapper">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="main-pic">
						<img src="../img/week6gsoc1.png" class="img-responsive" alt="blogpost">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-10 post">
					<div class="title">
						Drag <code>&</code> Drop Directives in Angular JS | GSOC 2016 | FOSSASIA
					</div>
					<div class="author">
						<img src="../img/dp.jpeg" class="avatar" alt="author">
						By Akhil Pandey, July 1, 2016
					</div>
					<div class="content">

						<p>The recent developments with the	 <a href="https://github.com/AkhilHector/sTeam-web-UI">sTeam web interface</a>, involved me writing drag and drop directives for giving scope to drag/move
						movements in the workarea and the workspace. The concept here is
						providing user with the feasibility to arrange rooms/documents
						swiftly and easily.</p>

						<p>
						<b>The idea behind it :</b>
						<br>
						So, in <code>sTeam-web-UI</code> the concept of rooms/documents is implemented using the <code><a href="https://github.com/AkhilHector/sTeam-web-UI/blob/master/controllers/workareaCtrl.js">workareaCtrl</a></code>. After creating a document/room the created objects appear
						in the workarea. So in the future, the items in the work area can be
						sorted and searched for; But adding the scope for drag movements to the web interface makes the the UI/UX to be commendable.
						</p>

						<p>
						<b>Implementation strategy :</b>
						<br>
						Firstly we need to create directives in angular that can support
						the actions which when triggered in the front end must result in relative change. So in order to link those actions we must write directives which properly catch the emitted events.
						<ul>
							<li><code><a href="https://github.com/AkhilHector/sTeam-web-UI/blob/master/directives/dragObj.js">dragObj</a></code> // The drag directive</li>
							<li><code><a href="https://github.com/AkhilHector/sTeam-web-UI/blob/master/directives/dropObj.js">dropObj</a></code> // The drop directive</li>
						</ul>
						</p>

						<p>
						<b>The <code>drag</code> Objective</b>
						<br>
						The way around for implementing the drag objective is to get the element which is selected for the drag option and then emit the event in order to complete the drag action. So we have to go the traditional way for working our way around with this.
						<br>
						<br>
						<code>
							// get the element first<br>
							angular.element(element).attr("isDraggable": true)<br>
							var id = angular.element(element).attr("id")<br>

							if(!id) {<br>
							id = uuid.create()<br>
							angular.element(element).attr("id", id)<br>
						}<br>
						</code>
						<br>
						Now we emit the events.
						<br>
						<br>
						<code>
						// emit events <br>
							element.bind("startDrag", function (send) {<br>
							data.originalEvent.dataTransfer.setData('text', id);<br>
							console.log("Starting to drag")<br>
							$rootScope.emit("STEAM-DRAG-STRT")<br>
						});<br>

						element.bind("stopDrag", function (send) {<br>
						console.log('Stopping to drag')<br>
						$rootScope.emit("STEAM-DRAG-STOP")<br>
					});<br>
						</code>
						<br>
						If we observe the element capturing part, we are just taking the id's of the elements which are in the DOM and then we bind the respective element with an action, be it <b>startDrag</b> or <b>stopDrag</b> the idea here is to store the id of the element and bind respective action/event to it.
						</p>

						<p>
						<b>The <code>drop</code> Objective</b>
						<br>
						Before we understand how the drop directive is written there has to be some clarity given on how should we go ahead in writing the directive. The drag and drop directives which when implemented should be carefully monitered since the entire process is interlinked. So the elements must be properly caught and the respective events must be properly binded. While testing we should check if the events are emitting proper actions to the elements or not.
						<br>
						<br>
						<code>
							$rootScope.$on("STEAM-DRAG-STRT", function () {<br>
							var domelm = document.getElementById(id);<br>
							angular.element(domelm).addClass("drag-target");<br>
						});<br>

						$rootScope.$on("STEAM-DRAG-STOP", function () {<br>
						var domelm = document.getElementById(id);<br>
						angular.element(domelm).removeClass("drag-target");<br>
						angular.element(domelm).removeClass("drag-over");<br>
					});<br>
						</code>
						</p>

						<p>There are alternatives to replicate this mechanism in jQuery and also plain Javascript. But the efficacy of the implementation comes to play only when the DOM can be played with easily.</p>

						<p>
							Thats it folks, <br>
							<code>Happy Hacking !!</code>
						</p>
							<center><img width="300px" height="100px" src="../img/sign.jpg"></center>
					</div>
					<div class="other-posts">
						<a href="../index.html" class="prev">
							← Go to blog
						</a>
						<a href="#" class="next pull-right">
							Next Article→
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-md-3 ">
				</div>
				<div class="col-md-3 copyright">
					Weblog of Akhil Pandey | 2016
				</div>
				<div class="col-md-6 menu">
					<ul>
						<li>
							<a href="https://akhilhector.com/about">About</a>
						</li>
						<li>
							<a href="https://github.com/AkhilHector">Code</a>
						</li>
						<li class="active">
							<a href="https://akhilhector.com/blog">Blog</a>
						</li>
						<li>
							<a href="https://akhilhector.com/photos">Photos</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>

	<script src="../js/jquery.js"></script>
	<script src="../js/bootstrap.js"></script>
	<script src="../js/theme.js"></script>

</body></html>