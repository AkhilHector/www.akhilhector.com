<!DOCTYPE html>
<html>
<head>

	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>blog | hector</title>

	<link rel="stylesheet" type="text/css" href="../css/blog.css">
	<link rel="stylesheet" type="text/css" href="../css/font-awesome.css">
	<link rel="stylesheet" type="text/css" href="../css/icomoon.css">
	<link rel="stylesheet" type="text/css" href="../css/highlight.css">

</head>

<body id="blogpost">
	<header class="navbar navbar-inverse normal" role="banner">
		<div class="container">
			<div class="navbar-header">
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="https://akhilhector.com" class="navbar-brand">Akhil Pandey</a>
			</div>
			<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
				<ul class="nav navbar-nav">
					<li><a href="../../about/index.html">About</a></li>
					<li><a href="https://github.com/AkhilHector">Code</a></li>
					<li><a href="../index.html">Blog</a></li>
					<li><a href="https://akhilhector.com/photos">Photos</a></li>
				</ul>
			</nav>
		</div>
	</header>

	<div id="blogpost-wrapper">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="main-pic">
						<img src="../img/week15gsoc1.png" class="img-responsive" alt="blogpost">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-10 post">
					<div class="title">
						Writing <code>mime-type</code> handlers in Angular | GSOC 2016 | FOSSASIA
					</div>
					<div class="author">
						<img src="../img/dp.jpeg" class="avatar" alt="author">
						By Akhil Pandey, August 25, 2016
					</div>
					<div class="content">

						<p>
						Developing a collaboration platform like <code>sTeam web interface</code> requires careful introspection while rolling out features that involve dealing with media. Any collaboration platform must support as many mime-types as possible, The REST API for <code>sTeam</code> written in <code>pike</code> offers us with the feasibilty of knowing the type of file or mime-type in the response object.
						<br>
						<code>sTeam</code> inbuilt has a mechanism which helps in detecting the mime-type of the file. So the same concept has been extended to the rest api in order to get the mime-type combined in the response object.
						</p>

						<p>
						The first question that arrives at any user's mind is what are the mime-types should i support, well basically there are couple of mime-types that can or could be considered in the category of compulsory mime-types that are ought to be supported if you wish to have media content on your application. Let us have a look at the popular or well known mime-types :
						<ul>
							<li>Text</li>
							<li>PDF's</li>
							<li>Image</li>
							<li>Audio</li>
							<li>Video</li>
						</ul>
						</p>

						<p>
						<b>What if we donot catch the mime-type ?</b>
						<br>
						This is basically a classic question that has the most easiest answer, just ensure that the mime-types which your handler is unable to catch pass them with a flag saying that it is an unknown mime-type. So let us have a look at how it is done :
						</p>

						<p>


<pre>
<code class="javascript">
angular.module('steam')

.controller('workspaceDetailedCtrl', ['$http', '$scope', 'handler', 'localStorageService', 'PDFViewerService', '$sce',
 function ($http, $scope, handler, localStorageService, pdf, $sce) {
  $scope.dataSrc = localStorageService.get('baseurl') + 'home/' + localStorageService.get('currentObjPath')

  $scope.mimeTypeHandler = function () {
    if(localStorageService.get('currentObjMimeType') == 'application/x-unknown-content-type') {
      return 'unknown'
    } else if (localStorageService.get('currentObjMimeType').match(/image\/*/)) {
      return 'image'
    } else if (localStorageService.get('currentObjMimeType') == 'application/pdf') {
      return 'pdf'
    } else if (localStorageService.get('currentObjMimeType').match(/audio\/*/)) {
      return 'audio'
    } else if (localStorageService.get('currentObjMimeType').match(/video\/*/)) {
      return 'video'
    } else if (localStorageService.get('currentObjMimeType').match(/text\/*/) ||
      localStorageService.get('currentObjMimeType') == 'application/x-javascript' ||
      localStorageService.get('currentObjMimeType') == 'application/x-pike') {
      return 'text'
    } else { return 'notfound' }
  }

</code>
</pre>

						<br>
						The best approach for writing a mime-type handler for your application would be :
						<ul>
							<li>Have a controller that has a function declared for doing the specific operation and pass the mimetype for the object that which you identify, so that the handler can simplify your job in just returning the type of your file</li>
							<li>Ensure that as many well known mime-types are supported and for the case of new mime-types that depend for specific application just add them to the <code>if...else</code> block</li>
							<li>Make it a point to catch all the unknown mime-types because when an unknown mime-type is not declared in your handler the browser tends to download the file directly instead of opening the same in your application</li>
						</ul>
						</p>

						<p>
						<br>
						<code>NOTE :</code> The service provider <code>localStorageService</code> is very helpful if you have an application that needs to store some data on the user's/client's end. So while the user logs into the web interface , <code>localStorageService</code> sets the userpath, objectmimepath and everything else in order to complete the functionality of the application. So gotcha here is that when you have a situation like this <code>localStorageService0</code> can be useful, since we can both set the data and get the data. Once the user logs out the data is cleared.

						</p>

						<p>
							Thats it folks, <br>
							<code>Happy Hacking !!</code>
						</p>
							<center><img width="300px" height="100px" src="../img/sign.jpg"></center>
					</div>
					<div class="other-posts">
						<a href="../index.html" class="prev">
							← Go to blog
						</a>
						<a href="#" class="next pull-right">
							Next Article→
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-md-3 ">
				</div>
				<div class="col-md-3 copyright">
					Weblog of Akhil Pandey | 2016
				</div>
				<div class="col-md-6 menu">
					<ul>
						<li>
							<a href="https://akhilhector.com/about">About</a>
						</li>
						<li>
							<a href="https://github.com/AkhilHector">Code</a>
						</li>
						<li class="active">
							<a href="https://akhilhector.com/blog">Blog</a>
						</li>
						<li>
							<a href="https://akhilhector.com/photos">Photos</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>

	<script src="../js/jquery.js"></script>
	<script src="../js/bootstrap.js"></script>
	<script src="../js/theme.js"></script>
	<script src="../js/highlight.min.js"></script>

</body></html>